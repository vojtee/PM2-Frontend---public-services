(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{3457:function(e,r,t){"use strict";t.d(r,{Z:function(){return v}});var a=t(3366),n=t(7462),o=t(7294),s=t(6010),i=t(4780),l=t(948),d=t(1657),u=t(1588),c=t(4867);function m(e){return(0,c.Z)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var h=t(4423),p=t(5704),x=t(5893);let g=["className","row"],Z=e=>{let{classes:r,row:t,error:a}=e;return(0,i.Z)({root:["root",t&&"row",a&&"error"]},m,r)},f=(0,l.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,t.row&&r.row]}})(({ownerState:e})=>(0,n.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),b=o.forwardRef(function(e,r){let t=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:o,row:i=!1}=t,l=(0,a.Z)(t,g),u=(0,h.Z)(),c=(0,p.Z)({props:t,muiFormControl:u,states:["error"]}),m=(0,n.Z)({},t,{row:i,error:c.error}),b=Z(m);return(0,x.jsx)(f,(0,n.Z)({className:(0,s.Z)(b.root,o),ownerState:m,ref:r},l))});var v=b},3584:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-new-department",function(){return t(7563)}])},7563:function(e,r,t){"use strict";t.r(r);var a=t(5893),n=t(9008),o=t.n(n),s=t(1163),i=t(8482),l=t(6310),d=t(7357),u=t(6447),c=t(5861),m=t(135),h=t(3321),p=t(2662),x=t(8334),g=t(3340),Z=t(4054),f=t(3457),b=t(480),v=t(5071),C=t(6815),N=t(6822),j=t(7294);let w=()=>{let e=(0,s.useRouter)();(0,p.a)();let r=(0,N.Z)(),t=(0,i.TA)({initialValues:{departmentName:"",description:"",phoneNumber:"",address:"",departmentCategories:[],submit:null},validationSchema:l.Ry({departmentName:l.Z_().max(255).required("Department Name is required"),phoneNumber:l.Z_().max(20).required("Phone Number is required"),address:l.Z_().max(500).required("Address is required"),description:l.Z_().max(1e3),departmentCategories:l.IX().min(1,"Select at least one Department Category")}),onSubmit:async(t,a)=>{try{console.log(t);let{departmentName:a,description:n,phoneNumber:o,address:s,departmentCategories:i}=t,l={name:a,description:n,address:s,phoneNumber:o,categories:i};console.log(l),await r.post("/api/v1/departments",l),e.push("/departments")}catch(e){console.error("Error creating employee:",e),a.setStatus({success:!1}),a.setErrors({submit:"Error creating employee."}),a.setSubmitting(!1)}}}),[n,x]=(0,j.useState)([]);return(0,j.useEffect)(()=>{let e=async()=>{try{let e=await r.get("/api/v1/categories");console.log(e.data);let t=e.data;x(t),console.log(t)}catch(e){console.log(e)}};e()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o(),{children:(0,a.jsx)("title",{children:"Create Department"})}),(0,a.jsx)(d.Z,{sx:{flex:"1 1 auto",alignItems:"center",display:"flex",justifyContent:"center"},children:(0,a.jsx)(d.Z,{sx:{maxWidth:550,px:3,py:"100px",width:"100%"},children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u.Z,{spacing:1,sx:{mb:3},children:(0,a.jsx)(c.Z,{variant:"h4",children:"Create Department"})}),(0,a.jsxs)("form",{noValidate:!0,onSubmit:t.handleSubmit,children:[(0,a.jsxs)(u.Z,{spacing:3,children:[(0,a.jsx)(m.Z,{error:!!(t.touched.departmentName&&t.errors.departmentName),fullWidth:!0,helperText:t.touched.departmentName&&t.errors.departmentName,label:"Department Name",name:"departmentName",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.departmentName}),(0,a.jsx)(m.Z,{error:!!(t.touched.description&&t.errors.description),fullWidth:!0,helperText:t.touched.description&&t.errors.description,label:"Description",name:"description",onBlur:t.handleBlur,onChange:t.handleChange,multiline:!0,rows:4,value:t.values.description}),(0,a.jsx)(m.Z,{error:!!(t.touched.phoneNumber&&t.errors.phoneNumber),fullWidth:!0,helperText:t.touched.phoneNumber&&t.errors.phoneNumber,label:"Phone Number",name:"phoneNumber",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.phoneNumber}),(0,a.jsx)(m.Z,{error:!!(t.touched.address&&t.errors.address),fullWidth:!0,helperText:t.touched.address&&t.errors.address,label:"Address",name:"address",onBlur:t.handleBlur,onChange:t.handleChange,value:t.values.address}),(0,a.jsx)(g.Z,{id:"department-category-label",children:"Department Categories"}),(0,a.jsxs)(Z.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{children:n&&n.map(e=>(0,a.jsx)(b.Z,{control:(0,a.jsx)(v.Z,{checked:t.values.departmentCategories.includes(e.id),onChange:r=>{let a=r.target.checked;t.setFieldValue("departmentCategories",a?[...t.values.departmentCategories,e.id]:t.values.departmentCategories.filter(r=>r!==e.id))},name:"departmentCategories-".concat(e.id)}),label:e.name},e.id))}),t.touched.departmentCategory&&t.errors.departmentCategories&&(0,a.jsx)(C.Z,{error:!0,children:t.errors.departmentCategories})]})]}),t.errors.submit&&(0,a.jsx)(c.Z,{color:"error",sx:{mt:3},variant:"body2",children:t.errors.submit}),(0,a.jsx)(h.Z,{fullWidth:!0,size:"large",sx:{mt:3},type:"submit",variant:"contained",children:"Create Department"})]})]})})})]})};w.getLayout=e=>(0,a.jsx)(x.A,{children:e}),r.default=w},6822:function(e,r,t){"use strict";var a=t(5121);let n=()=>{let e=a.Z.create({baseURL:"https://bettercity.mikita.dev",timeout:8e3,headers:{Authorization:"Bearer "+window.sessionStorage.getItem("token")}});return e};r.Z=n}},function(e){e.O(0,[60,230,410,703,121,28,333,435,334,774,888,179],function(){return e(e.s=3584)}),_N_E=e.O()}]);